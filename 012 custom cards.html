<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Card Creator</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap');
    
    * {
      font-family: 'Nunito', sans-serif;
    }
    
    .tab-btn {
      transition: all 0.2s ease;
    }
    
    .tab-btn.active {
      background: #0ea5e9;
      color: white;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .fade-in {
      animation: fadeIn 0.3s ease forwards;
    }
    
    .toast {
      animation: slideIn 0.3s ease forwards;
    }
    
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    .image-preview {
      width: 100%;
      height: 120px;
      border-radius: 10px;
      object-fit: cover;
      background: #f1f5f9;
    }

    .image-placeholder {
      width: 100%;
      height: 120px;
      border-radius: 10px;
      background: #f1f5f9;
      border: 2px dashed #cbd5e1;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #94a3b8;
      font-size: 2rem;
    }

    .pair-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      padding: 20px;
      background: linear-gradient(135deg, #f0f9ff 0%, #f8fafc 100%);
      border-radius: 15px;
      border: 2px solid #e0f2fe;
    }

    .card-input-group {
      background: white;
      padding: 15px;
      border-radius: 12px;
      border: 2px solid #e2e8f0;
    }

    .card-title {
      font-weight: 700;
      color: #0c4a6e;
      margin-bottom: 12px;
      font-size: 0.95rem;
    }

    .optional-badge {
      font-size: 0.75rem;
      color: #64748b;
      font-weight: 500;
      margin-left: 5px;
    }

    .mode-btn {
      transition: all 0.2s ease;
    }

    .mode-btn.active {
      background: #0ea5e9 !important;
      color: white !important;
    }

    .watermark {
      position: fixed;
      bottom: 16px;
      left: 16px;
      font-size: 12px;
      font-weight: 600;
      color: #0ea5e9;
      opacity: 0.5;
      pointer-events: none;
      z-index: 10;
    }
  </style>
  <style>body { box-sizing: border-box; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-gradient-to-br from-sky-50 via-white to-amber-50">
  <div id="app" class="h-full overflow-auto">
   <header class="bg-white shadow-sm border-b border-sky-100 sticky top-0 z-50">
    <div class="max-w-6xl mx-auto px-4 py-4">
     <div class="flex items-center justify-between">
      <div class="flex items-center gap-3">
       <div class="w-12 h-12 bg-gradient-to-br from-sky-400 to-sky-600 rounded-xl flex items-center justify-center shadow-lg"><span class="text-2xl">üé¥</span>
       </div>
       <div>
        <h1 id="app-title" class="text-2xl font-extrabold text-sky-900">Card Creator</h1>
        <p class="text-sm text-sky-600">Create memory games with custom pairs</p>
       </div>
      </div>
      <div class="flex gap-2"><button id="tab-create" class="tab-btn active px-4 py-2 rounded-lg font-semibold text-sky-700 bg-sky-100"> ‚úèÔ∏è Create Cards </button> <button id="tab-preview" class="tab-btn px-4 py-2 rounded-lg font-semibold text-sky-700 bg-sky-100"> üëÅÔ∏è Preview </button>
      </div>
     </div>
    </div>
   </header>
   <div class="watermark">
    CMarasigan
   </div>
   <div id="toast-container" class="fixed top-20 right-4 z-50 flex flex-col gap-2"></div>
   <main class="max-w-6xl mx-auto px-4 py-6">
    <div id="create-section" class="space-y-6">
     <section class="bg-white rounded-2xl shadow-lg p-6 border border-sky-100">
      <div class="flex items-center justify-between mb-4">
       <h2 class="text-lg font-bold text-sky-900 flex items-center gap-2">‚öôÔ∏è Game Settings</h2><a href="index.html" class="px-4 py-2 rounded-lg font-semibold text-white bg-red-500 hover:bg-red-600 transition"> ‚Üê Back to Main </a>
      </div>
      <div class="grid md:grid-cols-2 gap-4">
       <div><label class="block text-sm font-semibold text-sky-800 mb-2">Game Title</label> <input type="text" id="game-title" value="Memory Match Game" class="w-full px-4 py-3 rounded-xl border-2 border-sky-200 focus:border-sky-400 focus:outline-none transition text-sky-900 font-medium">
       </div>
       <div><label class="block text-sm font-semibold text-sky-800 mb-2">Card Back Color</label>
        <div class="flex gap-2"><input type="color" id="card-color" value="#0ea5e9" class="w-14 h-12 rounded-lg cursor-pointer border-2 border-sky-200"> <input type="text" id="card-color-text" value="#0ea5e9" class="flex-1 px-4 py-3 rounded-xl border-2 border-sky-200 focus:border-sky-400 focus:outline-none transition text-sky-900 font-mono">
        </div>
       </div>
      </div>
     </section>
     <section class="bg-white rounded-2xl shadow-lg p-6 border border-sky-100">
      <h2 class="text-lg font-bold text-sky-900 mb-4 flex items-center gap-2">‚ûï Add New Pair</h2>
      <div class="mb-6 flex gap-3"><button id="mode-duplicate" class="mode-btn active px-4 py-2 rounded-lg font-semibold text-white bg-sky-500 hover:bg-sky-600 transition"> üìã Duplicate Pair </button> <button id="mode-custom" class="mode-btn px-4 py-2 rounded-lg font-semibold text-sky-700 bg-sky-100 hover:bg-sky-200 transition"> ‚úèÔ∏è Custom Pair </button>
      </div>
      <div id="duplicate-mode" class="bg-gradient-to-br from-sky-50 to-blue-50 rounded-xl p-6 border-2 border-sky-200">
       <div class="mb-4"><label class="block text-sm font-semibold text-sky-800 mb-2">Text / Label</label> <input type="text" id="dup-text" placeholder="e.g., Apple" class="w-full px-4 py-2 rounded-lg border-2 border-sky-200 focus:border-sky-400 focus:outline-none transition text-sky-900 mb-3"> <label class="block text-sm font-semibold text-sky-800 mb-2">Upload Image <span class="optional-badge">(optional)</span></label>
        <div class="mb-3"><input type="file" id="dup-image" accept="image/*" class="hidden">
         <div id="dup-preview" class="image-placeholder">
          üì∑
         </div><button type="button" onclick="document.getElementById('dup-image').click()" class="mt-2 w-full bg-sky-100 text-sky-700 py-2 px-3 rounded-lg font-semibold hover:bg-sky-200 transition text-sm"> Choose Image </button> <button type="button" id="dup-clear" onclick="clearImageMode('duplicate')" class="mt-2 w-full bg-red-100 text-red-700 py-2 px-3 rounded-lg font-semibold hover:bg-red-200 transition text-sm hidden"> Clear Image </button>
        </div>
       </div>
       <p class="text-sm text-sky-600 mb-4 bg-sky-100 p-3 rounded-lg">‚ÑπÔ∏è This card will appear twice in your deck with the same image and text</p><button id="add-dup-btn" class="w-full bg-gradient-to-r from-sky-500 to-sky-600 text-white py-3 px-6 rounded-xl font-bold hover:from-sky-600 hover:to-sky-700 transition shadow-lg"> ‚ûï Add Duplicate Pair </button>
      </div>
      <div id="custom-mode" class="pair-container hidden">
       <div class="card-input-group">
        <div class="card-title">
         Card 1
        </div><label class="block text-sm font-semibold text-sky-800 mb-2">Text / Label</label> <input type="text" id="pair-card1-text" placeholder="e.g., Apple" class="w-full px-4 py-2 rounded-lg border-2 border-sky-200 focus:border-sky-400 focus:outline-none transition text-sky-900 mb-3"> <label class="block text-sm font-semibold text-sky-800 mb-2">Upload Image <span class="optional-badge">(optional)</span></label>
        <div class="mb-3"><input type="file" id="pair-card1-image" accept="image/*" class="hidden">
         <div id="pair-card1-preview" class="image-placeholder">
          üì∑
         </div><button type="button" onclick="document.getElementById('pair-card1-image').click()" class="mt-2 w-full bg-sky-100 text-sky-700 py-2 px-3 rounded-lg font-semibold hover:bg-sky-200 transition text-sm"> Choose Image </button> <button type="button" id="pair-card1-clear" onclick="clearImageMode('card1')" class="mt-2 w-full bg-red-100 text-red-700 py-2 px-3 rounded-lg font-semibold hover:bg-red-200 transition text-sm hidden"> Clear Image </button>
        </div>
       </div>
       <div class="card-input-group">
        <div class="card-title">
         Card 2
        </div><label class="block text-sm font-semibold text-sky-800 mb-2">Text / Label</label> <input type="text" id="pair-card2-text" placeholder="e.g., ËãπÊûú" class="w-full px-4 py-2 rounded-lg border-2 border-sky-200 focus:border-sky-400 focus:outline-none transition text-sky-900 mb-3"> <label class="block text-sm font-semibold text-sky-800 mb-2">Upload Image <span class="optional-badge">(optional)</span></label>
        <div class="mb-3"><input type="file" id="pair-card2-image" accept="image/*" class="hidden">
         <div id="pair-card2-preview" class="image-placeholder">
          üì∑
         </div><button type="button" onclick="document.getElementById('pair-card2-image').click()" class="mt-2 w-full bg-sky-100 text-sky-700 py-2 px-3 rounded-lg font-semibold hover:bg-sky-200 transition text-sm"> Choose Image </button> <button type="button" id="pair-card2-clear" onclick="clearImageMode('card2')" class="mt-2 w-full bg-red-100 text-red-700 py-2 px-3 rounded-lg font-semibold hover:bg-red-200 transition text-sm hidden"> Clear Image </button>
        </div>
       </div>
      </div><button id="add-pair-btn" class="mt-6 w-full bg-gradient-to-r from-sky-500 to-sky-600 text-white py-3 px-6 rounded-xl font-bold hover:from-sky-600 hover:to-sky-700 transition shadow-lg hover:shadow-xl hidden"> ‚ûï Add Pair to Deck </button>
     </section>
     <section class="bg-white rounded-2xl shadow-lg p-6 border border-sky-100">
      <div class="flex items-center justify-between mb-4">
       <h2 class="text-lg font-bold text-sky-900 flex items-center gap-2">üÉè Your Pairs <span id="pair-count" class="text-sky-500 font-normal">(0 pairs)</span></h2><button id="clear-all-btn" class="text-red-500 hover:text-red-700 font-semibold text-sm transition hidden"> üóëÔ∏è Clear All </button>
      </div>
      <div id="pair-list" class="space-y-4">
       <div class="text-center py-12 text-sky-400">
        <div class="text-5xl mb-3">
         üìù
        </div>
        <p class="font-medium">No pairs yet. Add your first pair above!</p>
       </div>
      </div>
     </section>
     <section class="bg-gradient-to-r from-amber-50 to-orange-50 rounded-2xl shadow-lg p-6 border border-amber-200">
      <h2 class="text-lg font-bold text-amber-900 mb-4 flex items-center gap-2">üì• Export Your Cards</h2>
      <div class="grid md:grid-cols-2 gap-4"><button id="download-game-btn" class="bg-gradient-to-r from-emerald-500 to-emerald-600 text-white py-4 px-6 rounded-xl font-bold hover:from-emerald-600 hover:to-emerald-700 transition shadow-lg hover:shadow-xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed"> <span class="text-2xl">üéÆ</span>
        <div class="text-left">
         <div>
          Download HTML Game
         </div>
         <div class="text-sm font-normal opacity-90">
          Interactive memory match
         </div>
        </div></button> <button id="download-print-btn" class="bg-gradient-to-r from-violet-500 to-violet-600 text-white py-4 px-6 rounded-xl font-bold hover:from-violet-600 hover:to-violet-700 transition shadow-lg hover:shadow-xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed"> <span class="text-2xl">üìÑ</span>
        <div class="text-left">
         <div>
          Download for Printing
         </div>
         <div class="text-sm font-normal opacity-90">
          6 trading cards per page
         </div>
        </div></button>
      </div>
     </section>
    </div>
    <div id="preview-section" class="hidden">
     <div class="bg-white rounded-2xl shadow-lg p-6 border border-sky-100">
      <h2 class="text-lg font-bold text-sky-900 mb-4 flex items-center gap-2">üëÅÔ∏è Game Preview</h2>
      <div id="preview-container" class="min-h-96 bg-gradient-to-br from-sky-100 to-sky-50 rounded-xl p-6">
       <div class="text-center py-12 text-sky-400">
        <div class="text-5xl mb-3">
         üé¥
        </div>
        <p class="font-medium">Add pairs to see a preview of your memory game!</p>
       </div>
      </div>
     </div>
    </div>
   </main>
  </div>
  <script>
    const defaultConfig = {
      app_title: 'Card Creator',
      game_title: 'Memory Match Game'
    };

    let config = { ...defaultConfig };
    let pairs = [];
    let card1Image = null;
    let card2Image = null;
    let dupImage = null;
    let currentTab = 'create';
    let currentMode = 'duplicate';

    function showToast(message, type = 'success') {
      const container = document.getElementById('toast-container');
      const toast = document.createElement('div');
      const bgColor = type === 'success' ? 'bg-emerald-500' : type === 'error' ? 'bg-red-500' : 'bg-sky-500';
      toast.className = 'toast ' + bgColor + ' text-white px-4 py-3 rounded-xl shadow-lg font-medium flex items-center gap-2';
      const icon = type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è';
      toast.innerHTML = '<span>' + icon + '</span><span>' + message + '</span>';
      container.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }

    function clearImageMode(type) {
      if (type === 'duplicate') {
        dupImage = null;
        document.getElementById('dup-preview').innerHTML = '<div style="font-size: 2rem;">üì∑</div>';
        document.getElementById('dup-clear').classList.add('hidden');
      } else if (type === 'card1') {
        card1Image = null;
        document.getElementById('pair-card1-preview').innerHTML = '<div style="font-size: 2rem;">üì∑</div>';
        document.getElementById('pair-card1-clear').classList.add('hidden');
      } else if (type === 'card2') {
        card2Image = null;
        document.getElementById('pair-card2-preview').innerHTML = '<div style="font-size: 2rem;">üì∑</div>';
        document.getElementById('pair-card2-clear').classList.add('hidden');
      }
    }

    function setupImageInput(inputId, previewId, clearBtnId) {
      const input = document.getElementById(inputId);
      const preview = document.getElementById(previewId);
      const clearBtn = document.getElementById(clearBtnId);

      input.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (event) => {
            const dataUrl = event.target.result;
            if (inputId === 'pair-card1-image') {
              card1Image = dataUrl;
            } else if (inputId === 'pair-card2-image') {
              card2Image = dataUrl;
            } else if (inputId === 'dup-image') {
              dupImage = dataUrl;
            }
            preview.innerHTML = '<img src="' + dataUrl + '" alt="Preview" class="image-preview">';
            clearBtn.classList.remove('hidden');
          };
          reader.readAsDataURL(file);
        }
      });
    }

    setupImageInput('pair-card1-image', 'pair-card1-preview', 'pair-card1-clear');
    setupImageInput('pair-card2-image', 'pair-card2-preview', 'pair-card2-clear');
    setupImageInput('dup-image', 'dup-preview', 'dup-clear');

    function switchMode(mode) {
      currentMode = mode;
      document.getElementById('mode-duplicate').classList.toggle('active', mode === 'duplicate');
      document.getElementById('mode-custom').classList.toggle('active', mode === 'custom');
      document.getElementById('duplicate-mode').classList.toggle('hidden', mode !== 'duplicate');
      document.getElementById('custom-mode').classList.toggle('hidden', mode !== 'custom');
      document.getElementById('add-pair-btn').classList.toggle('hidden', mode !== 'custom');
    }

    function addDuplicatePair() {
      const text = document.getElementById('dup-text').value.trim();

      if (!text) {
        showToast('Please fill in the text!', 'error');
        return;
      }

      pairs.push({
        id: Date.now(),
        card1: { text: text, image: dupImage },
        card2: { text: text, image: dupImage }
      });

      document.getElementById('dup-text').value = '';
      document.getElementById('dup-preview').innerHTML = '<div style="font-size: 2rem;">üì∑</div>';
      document.getElementById('dup-clear').classList.add('hidden');
      dupImage = null;

      renderPairList();
      showToast('Added duplicate pair to your deck!');
    }

    function addCustomPair() {
      const text1 = document.getElementById('pair-card1-text').value.trim();
      const text2 = document.getElementById('pair-card2-text').value.trim();

      if (!text1 || !text2) {
        showToast('Please fill in both cards!', 'error');
        return;
      }

      pairs.push({
        id: Date.now(),
        card1: { text: text1, image: card1Image },
        card2: { text: text2, image: card2Image }
      });

      document.getElementById('pair-card1-text').value = '';
      document.getElementById('pair-card2-text').value = '';
      document.getElementById('pair-card1-preview').innerHTML = '<div style="font-size: 2rem;">üì∑</div>';
      document.getElementById('pair-card2-preview').innerHTML = '<div style="font-size: 2rem;">üì∑</div>';
      document.getElementById('pair-card1-clear').classList.add('hidden');
      document.getElementById('pair-card2-clear').classList.add('hidden');
      card1Image = null;
      card2Image = null;

      renderPairList();
      showToast('Added custom pair to your deck!');
    }

    function removePair(id) {
      pairs = pairs.filter(p => p.id !== id);
      renderPairList();
      showToast('Pair removed');
    }

    function renderPairList() {
      const list = document.getElementById('pair-list');
      const count = document.getElementById('pair-count');
      const clearBtn = document.getElementById('clear-all-btn');

      count.textContent = '(' + pairs.length + ' pair' + (pairs.length !== 1 ? 's' : '') + ')';
      clearBtn.classList.toggle('hidden', pairs.length === 0);

      if (pairs.length === 0) {
        list.innerHTML = '<div class="text-center py-12 text-sky-400"><div class="text-5xl mb-3">üìù</div><p class="font-medium">No pairs yet. Add your first pair above!</p></div>';
        updatePreview();
        return;
      }

      let html = '';
      for (let i = 0; i < pairs.length; i++) {
        const pair = pairs[i];
        const card1Content = pair.card1.image ? 
          '<img src="' + pair.card1.image + '" alt="Card 1" class="w-16 h-20 object-cover rounded-lg border-2 border-sky-300">' :
          '<div class="w-16 h-20 bg-sky-200 rounded-lg border-2 border-sky-300 flex items-center justify-center text-2xl">üìù</div>';
        const card2Content = pair.card2.image ? 
          '<img src="' + pair.card2.image + '" alt="Card 2" class="w-16 h-20 object-cover rounded-lg border-2 border-sky-300">' :
          '<div class="w-16 h-20 bg-sky-200 rounded-lg border-2 border-sky-300 flex items-center justify-center text-2xl">üìù</div>';
        
        const isDuplicate = pair.card1.text === pair.card2.text && pair.card1.image === pair.card2.image;
        const typeLabel = isDuplicate ? 'üìã Duplicate' : '‚úèÔ∏è Custom';
        
        html += '<div class="bg-gradient-to-r from-sky-50 to-sky-100 rounded-xl p-4 border-2 border-sky-200 flex gap-4 fade-in" style="animation-delay: ' + (i * 0.05) + 's">' +
          '<div class="flex-1"><div class="flex items-center gap-3">' +
          card1Content +
          '<div><div class="text-sm font-semibold text-sky-600">Card 1</div>' +
          '<div class="font-bold text-sky-900">' + pair.card1.text + '</div></div></div></div>' +
          '<div class="flex items-center text-2xl text-sky-500">‚ÜîÔ∏è</div>' +
          '<div class="flex-1"><div class="flex items-center gap-3">' +
          card2Content +
          '<div><div class="text-sm font-semibold text-sky-600">Card 2</div>' +
          '<div class="font-bold text-sky-900">' + pair.card2.text + '</div></div></div></div>' +
          '<div class="flex flex-col gap-2 items-end"><span class="text-xs bg-sky-200 text-sky-800 px-2 py-1 rounded">' + typeLabel + '</span>' +
          '<button type="button" onclick="removePair(' + pair.id + ')" class="text-red-500 hover:text-red-700 font-bold text-xl hover:bg-red-100 px-3 py-2 rounded-lg transition">‚úï</button></div>' +
          '</div>';
      }
      list.innerHTML = html;
      updatePreview();
    }

    function updatePreview() {
      const container = document.getElementById('preview-container');
      
      if (pairs.length === 0) {
        container.innerHTML = '<div class="text-center py-12 text-sky-400"><div class="text-5xl mb-3">üé¥</div><p class="font-medium">Add pairs to see a preview of your memory game!</p></div>';
        return;
      }

      const previewPairs = pairs.slice(0, 4);
      const cardColor = document.getElementById('card-color').value;
      const totalCards = previewPairs.length * 2;

      let html = '<div class="text-center mb-4"><h3 class="font-bold text-sky-900">' + document.getElementById('game-title').value + 
                 '</h3><p class="text-sm text-sky-600">Preview showing ' + previewPairs.length + ' of ' + pairs.length + 
                 ' pairs (' + totalCards + ' total cards)</p></div>' +
                 '<div class="grid grid-cols-4 gap-3 max-w-2xl mx-auto">';
      
      for (let i = 0; i < previewPairs.length; i++) {
        const pair = previewPairs[i];
        html += '<div class="aspect-[3/4] rounded-lg shadow-md flex items-center justify-center cursor-pointer transition hover:scale-105" ' +
                'style="background: ' + cardColor + '; border: 2px solid ' + cardColor + '"><span style="color: white;">?</span></div>';
        
        if (pair.card1.image) {
          html += '<div class="aspect-[3/4] rounded-lg shadow-md flex items-center justify-center text-2xl overflow-hidden bg-white border-2 border-sky-200">' +
                  '<img src="' + pair.card1.image + '" alt="Card" style="width: 100%; height: 100%; object-fit: cover;"></div>';
        } else {
          html += '<div class="aspect-[3/4] rounded-lg shadow-md flex flex-col items-center justify-center text-center bg-sky-50 border-2 border-sky-200 p-2">' +
                  '<span style="font-size: 1.5rem; margin-bottom: 5px;">üìù</span><span style="font-size: 0.75rem; color: #0c4a6e; font-weight: 600;">' + pair.card1.text + '</span></div>';
        }
      }
      
      html += '</div>';
      container.innerHTML = html;
    }

    function generateGameHTML() {
      const gameTitle = document.getElementById('game-title').value;
      const cardColor = document.getElementById('card-color').value;
      
      let gameCards = [];
      pairs.forEach((pair, index) => {
        gameCards.push({ pairId: index, content: pair.card1.text, image: pair.card1.image });
        gameCards.push({ pairId: index, content: pair.card2.text, image: pair.card2.image });
      });

      const cardDataJson = JSON.stringify(gameCards).replace(/\\/g, '\\\\').replace(/'/g, "\\'");
      const pairsDataJson = JSON.stringify(pairs).replace(/\\/g, '\\\\').replace(/'/g, "\\'");
      
      return '<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>' + gameTitle + '</title><style>@import url("https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap");* { margin: 0; padding: 0; box-sizing: border-box; font-family: "Nunito", sans-serif; }body { min-height: 100vh; background: linear-gradient(135deg, #e0f2fe 0%, #fef3c7 100%); padding: 20px; }.container { max-width: 900px; margin: 0 auto; }header { text-align: center; margin-bottom: 30px; }h1 { color: #0c4a6e; font-size: 2.5rem; margin-bottom: 10px; }.stats { display: flex; justify-content: center; gap: 30px; margin-bottom: 20px; flex-wrap: wrap; align-items: center; }.stat { background: white; padding: 15px 25px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }.stat-value { font-size: 2rem; font-weight: 800; color: ' + cardColor + '; }.stat-label { color: #64748b; font-size: 0.9rem; }.new-game-btn { background: ' + cardColor + '; color: white; border: none; padding: 12px 24px; font-size: 0.95rem; font-weight: 700; border-radius: 10px; cursor: pointer; transition: all 0.2s; white-space: nowrap; }.new-game-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0,0,0,0.2); }.game-board { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; perspective: 1000px; }@media (max-width: 600px) { .game-board { grid-template-columns: repeat(3, 1fr); gap: 10px; } }.card { aspect-ratio: 3/4; cursor: pointer; position: relative; transform-style: preserve-3d; transition: transform 0.5s; border-radius: 15px; }.card.flipped { transform: rotateY(180deg); }.card.matched { cursor: pointer; }.card.matched:hover { opacity: 0.9; }.card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 15px; display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.15); overflow: hidden; }.card-front { background: ' + cardColor + '; color: white; font-size: 3rem; }.card-back { background: white; transform: rotateY(180deg); border: 3px solid ' + cardColor + '; padding: 10px; display: flex; flex-direction: column; }.card-image { width: 100%; flex: 1; object-fit: cover; }.card-text { font-weight: 700; color: #0c4a6e; font-size: 0.85rem; text-align: center; word-break: break-word; padding: 8px; background: white; border-top: 1px solid #e0e7ff; }.card.matched .card-back { background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); border-color: #10b981; }.match-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); align-items: center; justify-content: center; z-index: 150; }.match-modal.show { display: flex; }.match-content { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; max-width: 700px; width: 90%; padding: 20px; background: rgba(255,255,255,0.15); border-radius: 20px; backdrop-filter: blur(10px); }.match-card-container { display: flex; flex-direction: column; align-items: center; gap: 15px; }.match-card { aspect-ratio: 3/4; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.3); width: 100%; }.match-card img { width: 100%; height: 100%; object-fit: cover; }.match-text { color: #0c4a6e; font-size: 1.4rem; font-weight: 800; text-align: center; word-break: break-word; background: rgba(255,255,255,0.95); padding: 12px; border-radius: 10px; }.match-btn { background: #0c4a6e; color: white; border: none; padding: 12px 30px; font-size: 1rem; font-weight: 700; border-radius: 10px; cursor: pointer; transition: all 0.2s; width: 100%; }.match-btn:hover { background: #082f49; transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.3); }.close-button { grid-column: 1 / -1; }.win-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); align-items: center; justify-content: center; z-index: 100; }.win-modal.show { display: flex; }.win-content { background: white; padding: 40px; border-radius: 25px; text-align: center; max-width: 400px; }.win-emoji { font-size: 5rem; margin-bottom: 20px; }.win-title { font-size: 2rem; color: #0c4a6e; margin-bottom: 10px; }.win-stats { color: #64748b; margin-bottom: 20px; }.win-buttons { display: flex; flex-direction: column; gap: 15px; }.win-btn { background: ' + cardColor + '; color: white; border: none; padding: 15px 30px; font-size: 1rem; font-weight: 700; border-radius: 12px; cursor: pointer; transition: all 0.2s; }.win-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.2); }.win-btn.secondary { background: #64748b; }.review-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); align-items: flex-start; justify-content: center; z-index: 150; overflow-y: auto; padding: 20px 0; }.review-modal.show { display: flex; }.review-content { background: white; padding: 40px; border-radius: 20px; max-width: 900px; width: 90%; margin: 20px auto; }.review-title { font-size: 2rem; color: #0c4a6e; margin-bottom: 30px; text-align: center; }.review-table { width: 100%; border-collapse: collapse; }.review-table th { background: #0c4a6e; color: white; padding: 15px; text-align: left; font-weight: 700; }.review-table td { padding: 15px; border-bottom: 1px solid #e2e8f0; }.review-table tr:hover { background: #f0f9ff; }.review-img { width: 60px; height: 80px; object-fit: cover; border-radius: 8px; }.review-pair-row { font-weight: 600; background: #f0f9ff; }.review-close { background: #0c4a6e; color: white; border: none; padding: 12px 30px; font-size: 1rem; font-weight: 700; border-radius: 10px; cursor: pointer; transition: all 0.2s; margin-top: 20px; width: 100%; }.review-close:hover { background: #082f49; }.watermark { position: fixed; bottom: 16px; left: 16px; font-size: 12px; font-weight: 600; color: #0ea5e9; opacity: 0.5; pointer-events: none; z-index: 10; }.zoom-btn { position: fixed; top: 80px; right: 20px; background: ' + cardColor + '; color: white; border: none; width: 48px; height: 48px; border-radius: 50%; font-size: 1.4rem; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(0,0,0,0.2); transition: all 0.2s; z-index: 50; }.zoom-btn:hover { transform: scale(1.1); box-shadow: 0 6px 16px rgba(0,0,0,0.3); }.zoom-btn:active { transform: scale(0.95); }@media (max-width: 700px) { .match-content { grid-template-columns: 1fr; gap: 20px; } }</style></head><body><div class="watermark">CMarasigan</div><div class="container"><header><h1>üé¥ ' + gameTitle + '</h1><div class="stats"><div class="stat"><div class="stat-value" id="moves">0</div><div class="stat-label">Moves</div></div><div class="stat"><div class="stat-value" id="pairs">0/' + pairs.length + '</div><div class="stat-label">Pairs Found</div></div><div class="stat"><div class="stat-value" id="timer">0:00</div><div class="stat-label">Time</div></div><button class="new-game-btn" onclick="resetGame()">üîÑ New Game</button></div></header><button class="zoom-btn" onclick="cycleZoom()" title="Cycle Zoom">üîç</button><div class="game-board" id="game-board" style="transform: scale(1); transform-origin: top center;"></div></div><div class="match-modal" id="match-modal"><div class="match-content"><div class="match-card-container"><div id="match-card-1" class="match-card"></div><div id="match-text-1" class="match-text"></div></div><div class="match-card-container"><div id="match-card-2" class="match-card"></div><div id="match-text-2" class="match-text"></div></div><button class="match-btn close-button" onclick="closeMatchModal()">‚Üê Back to Board</button></div></div><div class="review-modal" id="review-modal"><div class="review-content"><h2 class="review-title">üìö Review All Pairs</h2><table class="review-table"><thead><tr><th>Card 1</th><th>Text</th><th>Card 2</th><th>Text</th></tr></thead><tbody id="review-body"></tbody></table><button class="review-close" onclick="closeReviewModal()">Close Review</button></div></div><div class="win-modal" id="win-modal"><div class="win-content"><div class="win-emoji">üéâ</div><h2 class="win-title">Congratulations!</h2><p class="win-stats" id="win-stats"></p><div class="win-buttons"><button class="win-btn" onclick="resetGame()">üîÑ Play Again</button><button class="win-btn secondary" onclick="showReview()">üìö Review Pairs</button></div></div></div><script>const cardData = JSON.parse(\'' + cardDataJson + '\');const pairsData = JSON.parse(\'' + pairsDataJson + '\');const totalPairs = ' + pairs.length + ';let shuffledCards = [];let flippedCards = [];let matchedPairs = 0;let moves = 0;let timerInterval = null;let seconds = 0;let gameStarted = false;let matchedPairIds = new Set();let zoomLevel = 1;const zoomStages = [0.7, 0.85, 1, 1.15, 1.3];let currentZoomIndex = 2;function cycleZoom() {currentZoomIndex = (currentZoomIndex + 1) % zoomStages.length;updateZoom();}function updateZoom() {zoomLevel = zoomStages[currentZoomIndex];document.getElementById("game-board").style.transform = "scale(" + zoomLevel + ")";}function shuffle(array) {const arr = [...array];for (let i = arr.length - 1; i > 0; i--) {const j = Math.floor(Math.random() * (i + 1));[arr[i], arr[j]] = [arr[j], arr[i]];}return arr;}function renderBoard() {shuffledCards = shuffle(cardData);const board = document.getElementById("game-board");board.innerHTML = shuffledCards.map((card, index) => {let backContent = "";if (card.image) {backContent = \'<img src="\' + card.image + \'" alt="Card" class="card-image"><div class="card-text">\' + card.content + \'</div>\';}else {backContent = \'<div class="card-text" style="font-size: 1.2rem;">\' + card.content + \'</div>\';}return \'<div class="card" data-index="\' + index + \'" data-pair-id="\' + card.pairId + \'" onclick="flipCard(this)"><div class="card-face card-front">?</div><div class="card-face card-back">\' + backContent + \'</div></div>\';}).join("");;}function startTimer() {if (!gameStarted) {gameStarted = true;timerInterval = setInterval(() => {seconds++;const mins = Math.floor(seconds / 60);const secs = seconds % 60;document.getElementById("timer").textContent = mins + ":" + (secs < 10 ? "0" : "") + secs;}, 1000);}}function flipCard(cardEl) {if (flippedCards.length >= 2 || cardEl.classList.contains("flipped") || cardEl.classList.contains("matched")) return;startTimer();cardEl.classList.add("flipped");flippedCards.push(cardEl);if (flippedCards.length === 2) {moves++;document.getElementById("moves").textContent = moves;checkMatch();}}function showMatchPopup(card1Data, card2Data) {const card1Back = card1Data.image ? \'<img src="\' + card1Data.image + \'" alt="Card 1">\' : \'<div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: #f0f9ff; font-size: 2rem; color: #0c4a6e; font-weight: 700;">\' + (card1Data.text || card1Data.content || "") + \'</div>\';const card2Back = card2Data.image ? \'<img src="\' + card2Data.image + \'" alt="Card 2">\' : \'<div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: #f0f9ff; font-size: 2rem; color: #0c4a6e; font-weight: 700;">\' + (card2Data.text || card2Data.content || "") + \'</div>\';document.getElementById("match-card-1").innerHTML = card1Back;document.getElementById("match-card-2").innerHTML = card2Back;document.getElementById("match-text-1").textContent = card1Data.text || card1Data.content || "";document.getElementById("match-text-2").textContent = card2Data.text || card2Data.content || "";document.getElementById("match-modal").classList.add("show");}function closeMatchModal() {document.getElementById("match-modal").classList.remove("show");}function checkMatch() {const card1El = flippedCards[0];const card2El = flippedCards[1];const card1Data = shuffledCards[card1El.dataset.index];const card2Data = shuffledCards[card2El.dataset.index];if (card1Data.pairId === card2Data.pairId) {card1El.classList.add("matched");card2El.classList.add("matched");matchedPairIds.add(card1Data.pairId);matchedPairs++;document.getElementById("pairs").textContent = matchedPairs + "/" + totalPairs;showMatchPopup(card1Data, card2Data);flippedCards = [];if (matchedPairs === totalPairs) {setTimeout(endGame, 1500);}} else {setTimeout(() => {card1El.classList.remove("flipped");card2El.classList.remove("flipped");flippedCards = [];}, 1000);}}function endGame() {clearInterval(timerInterval);const mins = Math.floor(seconds / 60);const secs = seconds % 60;document.getElementById("win-stats").textContent = "You completed the game in " + moves + " moves and " + mins + ":" + (secs < 10 ? "0" : "") + secs + "!";document.getElementById("win-modal").classList.add("show");}function showReview() {const tbody = document.getElementById("review-body");tbody.innerHTML = pairsData.map((pair, index) => {const card1Content = pair.card1.image ? \'<img src="\' + pair.card1.image + \'" alt="Card 1" class="review-img">\' : \'<div class="review-img" style="background: #f0f9ff; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: #0c4a6e;">üìù</div>\';const card2Content = pair.card2.image ? \'<img src="\' + pair.card2.image + \'" alt="Card 2" class="review-img">\' : \'<div class="review-img" style="background: #f0f9ff; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: #0c4a6e;">üìù</div>\';return \'<tr class="review-pair-row"><td colspan="4" style="font-size:1.1rem;padding:12px;background:#e0f2fe;color:#0c4a6e;">Pair \' + (index + 1) + \'</td></tr><tr><td>\' + card1Content + \'</td><td>\' + (pair.card1.text || "") + \'</td><td>\' + card2Content + \'</td><td>\' + (pair.card2.text || "") + \'</td></tr>\';}).join("");document.getElementById("win-modal").classList.remove("show");document.getElementById("review-modal").classList.add("show");}function closeReviewModal() {document.getElementById("review-modal").classList.remove("show");}function resetGame() {document.getElementById("win-modal").classList.remove("show");document.getElementById("review-modal").classList.remove("show");document.getElementById("match-modal").classList.remove("show");clearInterval(timerInterval);seconds = 0;moves = 0;matchedPairs = 0;gameStarted = false;flippedCards = [];matchedPairIds.clear();currentZoomIndex = 2;updateZoom();document.getElementById("moves").textContent = "0";document.getElementById("pairs").textContent = "0/" + totalPairs;document.getElementById("timer").textContent = "0:00";renderBoard();}document.addEventListener("click", function(e) {const card = e.target.closest(".card.matched");if (card && !document.getElementById("match-modal").classList.contains("show")) {const pairId = parseInt(card.dataset.pairId);const pair = pairsData[pairId];showMatchPopup(pair.card1, pair.card2);}});renderBoard();<\/script></body></html>';
    }

    function generatePrintHTML() {
      const gameTitle = document.getElementById('game-title').value;
      const cardColor = document.getElementById('card-color').value;

      let html = '<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>' + gameTitle + ' - Print</title>';
      html += '<style>';
      html += 'html, body { margin: 0; padding: 0; font-family: Arial, sans-serif; background: white; }';
      html += '@page { size: letter; margin: 0.25in; }';
      html += '.page { page-break-after: always; }';
      html += '.page-title { color: #0c4a6e; font-size: 16px; font-weight: bold; text-align: center; margin: 0.2in 0 0.3in 0; }';
      html += '.cards-grid { display: grid; grid-template-columns: repeat(3, 2.5in); grid-template-rows: repeat(2, 3.5in); gap: 0.15in; padding: 0.3in; }';
      html += '.card { width: 2.5in; height: 3.5in; border: 2px dashed #FF0000; border-radius: 8px; background: white; display: flex; flex-direction: column; box-sizing: border-box; overflow: hidden; }';
      html += '.card-image { width: 100%; height: 70%; object-fit: cover; }';
      html += '.card-text { width: 100%; height: 30%; font-weight: 700; color: #0c4a6e; text-align: center; word-break: break-word; font-size: 11px; padding: 8px; display: flex; align-items: center; justify-content: center; line-height: 1.3; background: white; border-top: 1px solid #e0e7ff; box-sizing: border-box; }';
      html += '.card-back-symbol { width: 100%; height: 100%; background: ' + cardColor + '; display: flex; align-items: center; justify-content: center; font-size: 3rem; color: white; font-weight: 700; border-radius: 6px; }';
      html += '.text-only { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; padding: 12px; }';
      html += '.watermark { position: fixed; bottom: 16px; left: 16px; font-size: 12px; font-weight: 600; color: #0ea5e9; opacity: 0.5; pointer-events: none; z-index: 10; }';
      html += '</style></head><body><div class="watermark">CMarasigan</div>';

      let allCards = [];
      for (let i = 0; i < pairs.length; i++) {
        allCards.push(pairs[i].card1);
        allCards.push(pairs[i].card2);
      }

      let cardIndex = 0;
      while (cardIndex < allCards.length) {
        html += '<div class="page"><div class="page-title">' + gameTitle + ' - FRONT</div><div class="cards-grid">';
        
        for (let i = 0; i < 6; i++) {
          if (cardIndex < allCards.length) {
            const card = allCards[cardIndex];
            if (card.image) {
              html += '<div class="card"><img src="' + card.image + '" alt="Card" class="card-image"><div class="card-text">' + card.text + '</div></div>';
            } else {
              html += '<div class="card"><div class="text-only"><div class="card-text">' + card.text + '</div></div></div>';
            }
            cardIndex++;
          } else {
            html += '<div class="card"></div>';
          }
        }
        
        html += '</div></div>';
      }

      let backCount = 0;
      const totalCardCount = allCards.length;
      while (backCount < totalCardCount) {
        html += '<div class="page"><div class="page-title">' + gameTitle + ' - BACK</div><div class="cards-grid">';
        
        for (let i = 0; i < 6; i++) {
          if (backCount < totalCardCount) {
            html += '<div class="card"><div class="card-back-symbol">?</div></div>';
            backCount++;
          } else {
            html += '<div class="card"></div>';
          }
        }
        
        html += '</div></div>';
      }

      html += '</body></html>';
      return html;
    }

    function downloadFile(content, filename, mimeType = 'text/html') {
      const blob = new Blob([content], { type: mimeType });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    function switchTab(tab) {
      currentTab = tab;
      document.getElementById('create-section').classList.toggle('hidden', tab !== 'create');
      document.getElementById('preview-section').classList.toggle('hidden', tab !== 'preview');
      document.getElementById('tab-create').classList.toggle('active', tab === 'create');
      document.getElementById('tab-preview').classList.toggle('active', tab === 'preview');
      
      if (tab === 'preview') {
        updatePreview();
      }
    }

    document.getElementById('mode-duplicate').addEventListener('click', () => switchMode('duplicate'));
    document.getElementById('mode-custom').addEventListener('click', () => switchMode('custom'));

    document.getElementById('add-dup-btn').addEventListener('click', addDuplicatePair);
    document.getElementById('add-pair-btn').addEventListener('click', addCustomPair);
    
    document.getElementById('dup-text').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') addDuplicatePair();
    });

    document.getElementById('pair-card1-text').addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && currentMode === 'custom') addCustomPair();
    });

    document.getElementById('pair-card2-text').addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && currentMode === 'custom') addCustomPair();
    });

    document.getElementById('clear-all-btn').addEventListener('click', () => {
      pairs = [];
      renderPairList();
      showToast('All pairs cleared');
    });

    document.getElementById('download-game-btn').addEventListener('click', () => {
      if (pairs.length < 1) {
        showToast('Add at least 1 pair to create a game!', 'error');
        return;
      }
      const gameContent = generateGameHTML();
      downloadFile(gameContent, 'memory-game.html');
      showToast('Game downloaded! Open the HTML file in any browser.');
    });

    document.getElementById('download-print-btn').addEventListener('click', () => {
      if (pairs.length < 1) {
        showToast('Add at least 1 pair to print!', 'error');
        return;
      }
      downloadFile(generatePrintHTML(), 'flash-cards-print.html');
      showToast('Print template downloaded! Open in your browser and press Ctrl+P to print.');
    });

    document.getElementById('tab-create').addEventListener('click', () => switchTab('create'));
    document.getElementById('tab-preview').addEventListener('click', () => switchTab('preview'));

    document.getElementById('card-color').addEventListener('input', (e) => {
      document.getElementById('card-color-text').value = e.target.value;
      updatePreview();
    });

    document.getElementById('card-color-text').addEventListener('input', (e) => {
      if (/^#[0-9A-Fa-f]{6}$/.test(e.target.value)) {
        document.getElementById('card-color').value = e.target.value;
        updatePreview();
      }
    });

    document.getElementById('game-title').addEventListener('input', updatePreview);

    async function initApp() {
      if (window.elementSdk) {
        await window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (newConfig) => {
            config = { ...defaultConfig, ...newConfig };
            document.getElementById('app-title').textContent = config.app_title || defaultConfig.app_title;
            document.getElementById('game-title').value = config.game_title || defaultConfig.game_title;
            updatePreview();
          },
          mapToCapabilities: (cfg) => ({
            recolorables: [],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (cfg) => new Map([
            ['app_title', cfg.app_title || defaultConfig.app_title],
            ['game_title', cfg.game_title || defaultConfig.game_title]
          ])
        });
      }
    }

    initApp();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cdbab9162d4ef1e',t:'MTc3MTA2MjcyMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
